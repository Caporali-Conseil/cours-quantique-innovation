  # 1. Installer l'environnement R (si votre Quarto utilise du code R)
  - name: Setup R
    uses: r-lib/actions/setup-r@v2
    continue-on-error: true 
    
  # 2. Installer Quarto CLI
  - name: Setup Quarto
    uses: quarto-dev/quarto-actions/setup@v2

  # 3. Installer les dépendances R (si besoin)
  - name: Install R Dependencies
    if: success() || failure() 
    run: |
      R -e 'install.packages("remotes")'
      R -e 'remotes::install_deps()'
    continue-on-error: true

  # 4. Construire le site Quarto (C'est l'étape cruciale qui génère le _site/)
  - name: Render Quarto Project
    run: quarto render

  # 5. Configurer et uploader l'artefact de déploiement
  - name: Setup Pages
    uses: actions/configure-pages@v5

  - name: Upload Quarto Artifact
    uses: actions/upload-pages-artifact@v3
    with:
      # Le dossier de sortie par défaut de Quarto est "_site"
      path: '_site' 
